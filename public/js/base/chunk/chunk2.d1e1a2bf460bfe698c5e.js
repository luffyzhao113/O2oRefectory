webpackJsonp([2],{"/sfj":function(e,t,a){var r=a("VU/8")(a("hPTO"),a("mbik"),!1,function(e){a("yheb")},"data-v-117bdab6",null);e.exports=r.exports},"0+MG":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._t("default"),e._v(" "),a("div",{staticClass:"box-flex-list"},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._t("title",[a("span",[e._v("列表")])]),e._v(" "),e._t("button")],2),e._v(" "),a("Table",{ref:"table",attrs:{columns:e.tableCol,data:e.value.data,size:"small","row-class-name":e.rowClassName,loading:e.loading}}),e._v(" "),a("Page",{attrs:{total:e.value.page.total,size:"small",current:e.value.page.current,"page-size":e.value.page.page_size,"show-total":""},on:{"on-change":e.change}})],1)],1)],2)},staticRenderFns:[]}},"0jOw":function(e,t,a){var r=a("VU/8")(a("A5/f"),a("0+MG"),!1,function(e){a("nd0k")},"data-v-617a8efb",null);e.exports=r.exports},"1ySM":function(e,t,a){var r=a("VU/8")(a("7/Af"),a("ttvE"),!1,function(e){a("V+FT")},"data-v-4acf2000",null);e.exports=r.exports},"2DOu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Validator=function(e){return{name:[{required:!0,type:"string",message:"用户姓名不能为空",trigger:"blur"},{type:"string",min:2,max:10,message:"用户姓名必须在 2 到 10 个字符之间",trigger:"blur"}],email:[{required:!0,message:"用户邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],role_id:[{required:!0,type:"number",message:"用户角色必须选择",trigger:"change"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{min:6,max:20,type:"string",message:"用户密码必须在 6 到 20 个字符之间",trigger:"blur"}],password_confirmation:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(t,a,r){e.formCreate.password!==a?r(new Error("两次密码不相同")):r()},trigger:"blur"}]}}},"3A9z":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{componentProps:{}},data:function(){return{loading:!1}},methods:{change:function(e){!1===e&&this.$emit("on-change")}}}},"3FdU":function(e,t,a){var r=a("VU/8")(a("YKEd"),a("sVbK"),!1,function(e){a("E3kf")},"data-v-28e24b20",null);e.exports=r.exports},"7/Af":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a("zOyG")),o=a("2DOu"),n=u(a("WU8R")),s=u(a("3A9z")),l=u(a("/sfj")),i=u(a("Am3z"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"create",components:{ComponentModal:l.default,RolesSelect:n.default,PhotoOnce:r.default},mixins:[s.default,i.default],data:function(){return{formCreate:{name:"",password:"",password_confirmation:"",status:1,role_id:"",email:""},ruleCreate:(0,o.Validator)(this)}}}},"A5/f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"my-lists",props:{value:{type:Object,default:function(){return{data:[],page:{total:100,current:1,page_size:20}}}},columns:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},data:function(){return{leftCol:[{title:"序号",render:function(e,t){var a=t.index;return e("span",null,[++a])},width:75}],rightCol:[]}},computed:{tableCol:function(){return this.leftCol.concat(this.columns,this.rightCol)}},methods:{change:function(e){this.$emit("change",e)},rowClassName:function(e,t){}}}},Am3z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a("y6l7"),n=(r=o)&&r.__esModule?r:{default:r};t.default={mixins:[n.default],methods:{updateSubmit:function(e,t){var a=this;this.$refs[e].validate(function(r){r?(a.loading=!0,a.$http.put(t,a.unObserver(a._data[e])).then(function(e){a.$Message.success("Success!"),a.change(!1)}).catch(function(e){a.formatErrors(e)}).finally(function(){a.loading=!1})):a.$Message.error("验证不通过!")})},createSubmit:function(e,t){var a=this;this.$refs[e].validate(function(r){r&&(a.loading=!0,a.$http.post(t,a._data[e]).then(function(e){a.$Message.success("Success!"),a.change(!1)}).catch(function(e){a.formatErrors(e)}).finally(function(){a.loading=!1}))})}}}},CQ81:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择角色",clearable:"",filterable:""},on:{"on-change":e.setValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.roles,function(t,r){return a("Option",{key:r,attrs:{value:t.id}},[e._v(e._s(t.name))])}))},staticRenderFns:[]}},E3kf:function(e,t,a){var r=a("cz+i");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("7a667ff0",r,!0,{})},HQix:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"roles-select",props:{value:[String,Number]},data:function(){return{model:this.value}},computed:{roles:function(){return this.$store.state.Role.data}},mounted:function(){var e=this;this.$nextTick(function(){0===e.$store.state.Role.data.length&&e.$http.get("role/select").then(function(t){e.$store.commit("setRolesData",t.data.data)})})},methods:{setValue:function(e){this.$emit("input",e)}},watch:{value:function(e){this.model=e}}}},LTAw:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".modal-body[data-v-117bdab6]{max-height:500px;overflow-y:auto}",""])},S1JE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Validator=function(e){return{name:[{required:!0,type:"string",message:"用户姓名不能为空",trigger:"blur"},{type:"string",min:2,max:10,message:"用户姓名必须在 2 到 10 个字符之间",trigger:"blur"}],email:[{required:!0,message:"用户邮箱不能为空",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],role_id:[{required:!0,type:"number",message:"用户角色必须选择",trigger:"change"}],password:[{min:6,max:20,type:"string",message:"用户密码必须在 6 到 20 个字符之间",trigger:"blur"}],password_confirmation:[{validator:function(t,a,r){e.formUpdate.password!==a?r(new Error("两次密码不相同")):r()},trigger:"blur"}]}}},T6AK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"true-or-false",props:{value:[String,Number],trueValue:{type:String,default:"是"},falseValue:{type:String,default:"否"}},data:function(){return{model:this.value,trueValueModel:this.trueValue,falseValueModel:this.falseValue}},methods:{setValue:function(e){this.$emit("input",e)}},watch:{value:function(e){this.model=e},falseValue:function(e){this.falseValueModel=e},trueValue:function(e){this.trueValueModel=e}}}},TLH8:function(e,t,a){var r=a("VU/8")(a("T6AK"),a("wNyQ"),!1,function(e){a("esxG")},"data-v-c12e66d8",null);e.exports=r.exports},TYj6:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},"V+FT":function(e,t,a){var r=a("ZTiw");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("189213c6",r,!0,{})},VWqC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a("y6l7"),n=(r=o)&&r.__esModule?r:{default:r};t.default={mixins:[n.default],data:function(){return{searchForm:{},data:{data:[],page:{total:0,current:1,page_size:20}},component:{current:"",data:{}}}},mounted:function(){this.search()},methods:{search:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]},assignmentData:function(e){this.data.data=e.data,this.data.page.total=e.total,this.data.page.current=e.current_page,this.data.page.page_size=e.per_page},showComponent:function(e,t){this.component.current=e,this.component.data=t},hideComponent:function(){this.component.current="",this.component.data={},this.search()},destroyItem:function(e,t){var a=this;this.$http.delete(t).then(function(e){a.search()}).catch(function(e){a.formatErrors(e)})},request:function(e){var t=JSON.parse(JSON.stringify(this.searchForm));return t.page=e,t}}}},WU8R:function(e,t,a){var r=a("VU/8")(a("HQix"),a("CQ81"),!1,function(e){a("lS6Q")},"data-v-5aaaeffe",null);e.exports=r.exports},YKEd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("S1JE"),o=i(a("WU8R")),n=i(a("3A9z")),s=i(a("Am3z")),l=i(a("/sfj"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:"update",components:{ComponentModal:l.default,RolesSelect:o.default},mixins:[n.default,s.default],data:function(){return{formUpdate:{name:"",password:"",password_confirmation:"",status:1,role_id:"",email:""},ruleUpdate:(0,r.Validator)(this)}},mounted:function(){var e=this;this.$nextTick(function(){e.$http.get("admin/"+e.componentProps.id).then(function(t){e.formUpdate=Object.assign(e.unObserver(e.formUpdate),t.data.data)}).catch(function(t){e.formatErrors(t)})})}}},ZTiw:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},"cz+i":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},eIcK:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".ivu-table .table-info-row td[data-v-617a8efb]{background-color:#2db7f5;color:#fff}",""])},esxG:function(e,t,a){var r=a("x9Cl");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("0be2b333",r,!0,{})},hPTO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"component-modal",props:{title:{type:String,default:"弹窗"},width:{type:Number,default:520},loading:{type:Boolean,default:!1}},methods:{change:function(e){this.$parent.$emit("on-change")}}}},"hU9+":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("my-lists",{attrs:{columns:e.columns,loading:e.loading},on:{change:e.search},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[e._v("搜索")])]),e._v(" "),a("Form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":80,inline:""}},[a("FormItem",{attrs:{prop:"role_id",label:"所属角色","label-width":60}},[a("roles-select",{model:{value:e.searchForm.role_id,callback:function(t){e.$set(e.searchForm,"role_id",t)},expression:"searchForm.role_id"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"name",label:"用户名","label-width":50}},[a("Input",{attrs:{type:"text"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"email",label:"邮箱","label-width":40}},[a("Input",{attrs:{type:"text"},model:{value:e.searchForm.email,callback:function(t){e.$set(e.searchForm,"email",t)},expression:"searchForm.email"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"status",label:"状态","label-width":40}},[a("true-or-false",{attrs:{"true-value":"开启","false-value":"关闭"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}})],1),e._v(" "),a("FormItem",{attrs:{"label-width":1}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.search(1)}}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{type:"warning"},on:{click:function(t){e.showComponent("Create")}}},[e._v("添加")])],1)],1)],1),e._v(" "),a(e.component.current,{tag:"components",attrs:{componentProps:e.component.data},on:{"on-change":e.hideComponent}})],1)},staticRenderFns:[]}},l5C3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a("0jOw")),o=u(a("VWqC")),n=u(a("3FdU")),s=u(a("1ySM")),l=u(a("WU8R")),i=u(a("TLH8"));function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"index",components:{TrueOrFalse:i.default,RolesSelect:l.default,MyLists:r.default,Create:s.default,Update:n.default},mixins:[o.default],data:function(){var e=this;return{columns:[{title:"登录邮箱",key:"email"},{title:"用户名称",key:"name"},{title:"所属角色",render:function(e,t){return e("span",null,[t.row.roles.name])}},{title:"状态",render:function(e,t){return e("span",null,[1===t.row.status?"开启":"关闭"])}},{title:"操作",render:function(t,a){var r=a.row;return t("button-group",null,[t("i-button",{attrs:{size:"small",disabled:0!=r.roles.super},on:{click:function(){return e.showComponent("Update",r)}}},["修改"]),t("poptip",{attrs:{confirm:!0,transfer:!0,title:"确定要删除吗？"},on:{"on-ok":function(){return e.destroyItem(r,"admin/"+r.id)}}},[t("i-button",{attrs:{size:"small",disabled:0!=r.roles.super}},["删除"])])])}}]}},methods:{search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,this.$http.get("admin",{params:this.request(t)}).then(function(t){e.assignmentData(t.data.data)}).catch(function(t){e.formatErrors(t)}).finally(function(){e.loading=!1})}}}},"lCJ/":function(e,t,a){var r=a("VU/8")(a("l5C3"),a("hU9+"),!1,function(e){a("wxGU")},"data-v-4ce050d0",null);e.exports=r.exports},lS6Q:function(e,t,a){var r=a("TYj6");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("17fe7acc",r,!0,{})},mbik:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:e.title,value:!0,transfer:!1,"mask-closable":!1,width:e.width},on:{"on-visible-change":e.change}},[a("div",{staticClass:"modal-body"},[e._t("default")],2),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[e._t("footer")],2),e._v(" "),e.loading?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},staticRenderFns:[]}},nd0k:function(e,t,a){var r=a("eIcK");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("23243ef0",r,!0,{})},sVbK:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("component-modal",{attrs:{title:"更新用户",loading:e.loading}},[a("Form",{ref:"formUpdate",attrs:{model:e.formUpdate,"label-width":80,rules:e.ruleUpdate}},[a("FormItem",{attrs:{label:"用户姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"用户邮箱"},model:{value:e.formUpdate.name,callback:function(t){e.$set(e.formUpdate,"name",t)},expression:"formUpdate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"用户邮箱"},model:{value:e.formUpdate.email,callback:function(t){e.$set(e.formUpdate,"email",t)},expression:"formUpdate.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户角色",prop:"role_id"}},[a("roles-select",{model:{value:e.formUpdate.role_id,callback:function(t){e.$set(e.formUpdate,"role_id",t)},expression:"formUpdate.role_id"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户密码",prop:"password"}},[a("Input",{attrs:{placeholder:"用户密码"},model:{value:e.formUpdate.password,callback:function(t){e.$set(e.formUpdate,"password",t)},expression:"formUpdate.password"}})],1),e._v(" "),a("FormItem",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("Input",{attrs:{placeholder:"确认密码"},model:{value:e.formUpdate.password_confirmation,callback:function(t){e.$set(e.formUpdate,"password_confirmation",t)},expression:"formUpdate.password_confirmation"}})],1),e._v(" "),a("FormItem",{attrs:{label:"是否开启",prop:"status"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.formUpdate.status,callback:function(t){e.$set(e.formUpdate,"status",t)},expression:"formUpdate.status"}},[a("Radio",{attrs:{label:1,value:1}},[e._v("开启")]),e._v(" "),a("Radio",{attrs:{label:0,value:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.updateSubmit("formUpdate","admin/"+e.componentProps.id)}}},[e._v("创建")])],1)],1)},staticRenderFns:[]}},ttvE:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("component-modal",{attrs:{title:"创建用户",loading:e.loading}},[a("Form",{ref:"formCreate",attrs:{model:e.formCreate,"label-width":80,rules:e.ruleCreate}},[a("FormItem",{attrs:{label:"用户姓名",prop:"name"}},[a("Input",{attrs:{placeholder:"用户邮箱"},model:{value:e.formCreate.name,callback:function(t){e.$set(e.formCreate,"name",t)},expression:"formCreate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户邮箱",prop:"email"}},[a("Input",{attrs:{placeholder:"用户邮箱"},model:{value:e.formCreate.email,callback:function(t){e.$set(e.formCreate,"email",t)},expression:"formCreate.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户角色",prop:"role_id"}},[a("roles-select",{model:{value:e.formCreate.role_id,callback:function(t){e.$set(e.formCreate,"role_id",t)},expression:"formCreate.role_id"}})],1),e._v(" "),a("FormItem",{attrs:{label:"用户密码",prop:"password"}},[a("Input",{attrs:{placeholder:"用户密码"},model:{value:e.formCreate.password,callback:function(t){e.$set(e.formCreate,"password",t)},expression:"formCreate.password"}})],1),e._v(" "),a("FormItem",{attrs:{label:"确认密码",prop:"password_confirmation"}},[a("Input",{attrs:{placeholder:"确认密码"},model:{value:e.formCreate.password_confirmation,callback:function(t){e.$set(e.formCreate,"password_confirmation",t)},expression:"formCreate.password_confirmation"}})],1),e._v(" "),a("FormItem",{attrs:{label:"是否开启",prop:"status"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:e.formCreate.status,callback:function(t){e.$set(e.formCreate,"status",t)},expression:"formCreate.status"}},[a("Radio",{attrs:{label:1,value:1}},[e._v("开启")]),e._v(" "),a("Radio",{attrs:{label:0,value:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.createSubmit("formCreate","admin")}}},[e._v("创建")])],1)],1)},staticRenderFns:[]}},uKoy:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},wNyQ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Select",{staticStyle:{width:"150px"},attrs:{clearable:"",transfer:""},on:{"on-change":e.setValue},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[a("Option",{attrs:{value:1}},[e._v(e._s(e.trueValueModel))]),e._v(" "),a("Option",{attrs:{value:0}},[e._v(e._s(e.falseValueModel))]),e._v(" "),e._t("default")],2)},staticRenderFns:[]}},wxGU:function(e,t,a){var r=a("uKoy");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("156645c8",r,!0,{})},x9Cl:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},yheb:function(e,t,a){var r=a("LTAw");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("bf9a99e2",r,!0,{})}});